/* --- RESET Y VARIABLES --- */
:root {
    --bg-color: #2c1e1a;    /* Café oscuro */
    --cover-color: #00695c; /* Turquesa Oscuro (Teal) */
    --accent: #e65100;      /* Naranja Quemado */
    --paper: #fdf5e6;       /* Crema */
    --text: #ffffff;
    --gold: #ffd700;
}

* { box-sizing: border-box; }

body {
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    background: radial-gradient(circle at 50% 30%, #5d4037 0%, var(--bg-color) 100%);
    font-family: 'Quicksand', sans-serif;
    color: var(--text);
    overflow: hidden; /* Evita scroll en la página principal */
    touch-action: pan-y; /* Permite scroll vertical pero no horizontal nativo */
}

/* --- AMBIENTE --- */
.ambient-light {
    position: absolute; width: 100%; height: 50%;
    background: radial-gradient(ellipse at top, rgba(255,165,0,0.15), transparent 70%);
    pointer-events: none; z-index: 1;
}

.main-header {
    text-align: center; z-index: 10; margin-top: 20px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}
h1 { font-family: 'Playfair Display', serif; font-size: 1.8rem; margin: 0; }
.counter { font-size: 0.9rem; opacity: 0.8; margin-top: 5px; text-transform: uppercase; letter-spacing: 1px; }

/* --- ESCENARIO 3D (El contenedor inteligente) --- */
.scene {
    position: relative;
    width: 100%;
    flex-grow: 1; /* Ocupa todo el espacio disponible */
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 2000px; /* Profundidad 3D */
    z-index: 5;
    /* Corrección de posición inicial */
    margin-top: -20px;
}

/* --- EL LIBRO --- */
.book {
    position: relative;
    width: 300px;  /* Ancho de UNA página */
    height: 440px; /* Alto del libro */
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1);
    /* El libro empieza centrado (translateX 0) */
}

/* --- PÁGINAS --- */
.page {
    position: absolute;
    width: 100%; height: 100%;
    top: 0; left: 0;
    transform-origin: left; /* Giran desde la izquierda (lomo) */
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
    cursor: grab;
}

.front, .back {
    position: absolute;
    width: 100%; height: 100%;
    backface-visibility: hidden; /* Oculta la cara trasera */
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    border-radius: 2px 8px 8px 2px;
}

.back { transform: rotateY(180deg); } /* La parte de atrás está girada */

/* --- ESTILOS DE PAPEL Y PORTADA --- */
.paper {
    background: var(--paper);
    background-image: linear-gradient(to right, rgba(0,0,0,0.1) 0%, transparent 5%); /* Sombra lomo */
    box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
    border: 1px solid #dcd0c0;
    overflow: hidden; /* IMPORTANTE: Las fotos no se salen */
}

.cover-design {
    background: var(--cover-color);
    border: 4px solid var(--accent);
    color: var(--gold);
    box-shadow: inset 0 0 40px rgba(0,0,0,0.5);
}
.reverse { border-left: none; } /* Ajuste borde contraportada */

.spine-line { width: 4px; height: 100%; position: absolute; left: 10px; background: rgba(0,0,0,0.2); }
.cover-design h2 { font-family: 'Playfair Display', serif; font-size: 2.5rem; line-height: 1; text-align: center; }
.seal { font-size: 3rem; margin: 20px 0; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }

/* --- GRID DE FOTOS (Rejilla) --- */
.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 12px;
    padding: 20px;
    width: 100%; height: 100%;
}

/* --- TARJETA POLAROID (FOTO PEQUEÑA) --- */
.polaroid {
    position: relative;
    width: 100%; height: 100%;
    background: #fff;
    padding: 6px 6px 25px 6px; /* Efecto marco polaroid */
    box-shadow: 2px 3px 8px rgba(0,0,0,0.15);
    transform: rotate(var(--r)); /* Rotación aleatoria */
    transition: transform 0.2s;
    cursor: pointer;
}

.polaroid:active { transform: scale(0.95); } /* Efecto click visual */
.polaroid img { width: 100%; height: 100%; object-fit: cover; filter: sepia(10%); display: block; }
.polaroid p { display: none; } /* El texto solo se ve en el zoom */

/* --- ZOOM OVERLAY (PANTALLA COMPLETA) --- */
.overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.9);
    backdrop-filter: blur(5px);
    z-index: 1000;
    display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none;
    transition: opacity 0.3s ease;
}

.overlay.active { opacity: 1; pointer-events: auto; }

/* Tarjeta Gigante en el Zoom */
.big-card {
    width: 300px; height: 420px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s;
    cursor: pointer;
}

/* Caras de la tarjeta gigante */
.big-face {
    position: absolute; width: 100%; height: 100%;
    backface-visibility: hidden;
    background: white;
    padding: 15px 15px 60px 15px;
    border-radius: 4px;
    display: flex; justify-content: center; align-items: center;
}

.big-front img { width: 100%; height: 100%; object-fit: cover; border: 1px solid #eee; }
.big-back { 
    transform: rotateY(180deg); 
    background: #fffdf5;
    padding: 20px; text-align: center;
    font-family: 'Dancing Script', cursive; font-size: 1.5rem; color: #333;
    display: flex; align-items: center; justify-content: center;
}

/* Clase para girar la tarjeta gigante */
.big-card.flipped { transform: rotateY(180deg); }

.hint { position: fixed; bottom: 20px; width: 100%; text-align: center; font-size: 0.8rem; opacity: 0.6; z-index: 8; }

/* --- RESPONSIVE MAGIC (EL ARREGLO PARA MÓVIL) --- */
@media (max-width: 650px) {
    /* En móvil, en lugar de cambiar píxeles, ESCALAMOS todo el escenario */
    .scene {
        /* Reduce el libro al 60% de su tamaño para que quepa */
        /* Al abrirse (600px ancho real), ocupará unos 360px visuales, perfecto para móvil */
        transform: scale(0.60); 
    }
    
    /* Ajustes menores */
    h1 { font-size: 1.5rem; }
    .grid { gap: 8px; padding: 15px; }
    .polaroid { padding-bottom: 20px; }
    .book { height: 420px; } /* Un pelín más corto para pantallas bajas */
}

@media (max-width: 360px) {
    /* Para móviles muy estrechos */
    .scene { transform: scale(0.52); }
}