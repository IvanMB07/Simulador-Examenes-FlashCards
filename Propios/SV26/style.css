/* --- NUEVA PALETA VIBRANTE Y ALEGRE --- */
:root {
    --bg-gradient-start: #ff9a9e; /* Rosa suave */
    --bg-gradient-end: #fad0c4;   /* Melocotón claro */
    --cover-ruby: #c2185b;        /* Rojo Frambuesa/Rubí atrevido */
    --accent-gold: #ffd700;       /* Oro brillante */
    --paper-clean: #fffaf0;       /* Blanco crema limpio */
    --text-pop: #ffffff;          /* Blanco puro para contraste */
    --text-dark: #442c2e;         /* Color oscuro cálido para textos interiores */
}

* { box-sizing: border-box; }

body {
    margin: 0; height: 100vh;
    display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
    /* Nuevo fondo degradado alegre */
    background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
    font-family: 'Quicksand', sans-serif;
    color: var(--text-dark);
    overflow: hidden;
    touch-action: pan-y;

    
}

/* Luz ambiental más brillante y limpia */
.bright-light {
    position: absolute; top: -20%; left: -20%; width: 140%; height: 140%;
    background: radial-gradient(circle, rgba(255,255,255,0.3), transparent 60%);
    pointer-events: none; z-index: 1;
}

/* --- CABECERA --- */
.main-header {
    position: absolute; /* Sacamos el título del flujo para que no mueva el libro */
    top: 40px;          /* AJUSTA AQUÍ: Más número = más abajo el título */
    left: 0;
    width: 100%;
    text-align: center;
    z-index: 10;
    margin: 0;
    padding: 0;
}
h1 { 
    font-family: 'Cinzel', serif;
    font-size: 2rem; margin: 0; letter-spacing: 1px; 
    color: var(--cover-ruby); /* El título en rojo rubí */
    font-weight: 700;
}
.counter-wrapper {
    font-size: 0.9rem; color: var(--text-dark); margin-top: 5px; font-weight: 500;
}
.heart-icon { font-size: 1rem; vertical-align: middle; }

/* --- ESCENARIO 3D --- */
.scene {
    position: relative; width: 100%; flex-grow: 1;
    display: flex; justify-content: center; align-items: center;
    perspective: 2500px; z-index: 5; margin-top: -20px;
}

.book {
    position: relative; width: 300px; height: 440px;
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1);
    /* Sombra más suave y colorida */
    box-shadow: none; 
}

/* --- PÁGINAS --- */
.page {
    position: absolute; width: 100%; height: 100%; top: 0; left: 0;
    transform-origin: left; transform-style: preserve-3d;
    transition: transform 0.9s cubic-bezier(0.645, 0.045, 0.355, 1);
}

.front, .back {
    position: absolute; width: 100%; height: 100%;
    backface-visibility: hidden;
    border-radius: 4px 10px 10px 4px; /* Bordes más redondeados y suaves */
    box-shadow: 2px 5px 15px rgba(0,0,0,0.15);
}
.back { transform: rotateY(180deg); }

/* --- ESTILOS DE PAPEL Y PORTADA (NUEVOS) --- */
.paper {
    background: var(--paper-clean);
    /* Degradado muy sutil para el lomo, sin texturas viejas */
    background-image: linear-gradient(to right, rgba(194, 24, 91, 0.05) 0%, transparent 10%);
    border: 1px solid #ffe0e6; /* Borde rosado sutil */
    overflow: hidden;
}

.cover-design {
    background: var(--cover-ruby); 
    color: var(--text-pop);
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center;
    box-shadow: inset 0 0 50px rgba(0,0,0,0.2); 
    border: none;
    /* Añadimos padding y overflow para seguridad */
    padding: 20px;
    overflow: hidden;
}

.reverse { border-left: none; }

/* Detalles dorados en portada */
.gold-border {
    position: absolute; 
    top: 20px; left: 20px; right: 20px; bottom: 20px;
    border: 3px solid var(--accent-gold); 
    pointer-events: none;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); 
    border-radius: 8px;
}
.cover-design h2 { 
    font-family: 'Cinzel', serif; 
    font-size: 2.2rem;          /* Tamaño ajustado */
    line-height: 1.1;           /* Interlineado más junto */
    text-align: center; 
    text-shadow: 0 2px 4px rgba(0,0,0,0.3); 
    color: var(--text-pop); 
    font-weight: 700;
    margin: 0;                  /* Quitamos margen por defecto */
}
.seal { 
    font-size: 2.5rem;          /* Tamaño reducido */
    margin: 10px 0;             /* Menos espacio arriba y abajo */
    text-shadow: 0 4px 8px rgba(0,0,0,0.2); 
}

.date { 
    font-family: 'Quicksand', sans-serif; 
    font-size: 1.1rem; 
    color: var(--accent-gold); 
    font-weight: bold; 
    letter-spacing: 1px;
    margin: 0;                  /* Quitamos margen por defecto */
    margin-bottom: 15px;        /* ¡ESTO ES LO QUE ARREGLA QUE SE SALGA! */
}
.final-msg { font-family: 'Dancing Script', cursive; font-size: 1.8rem; margin-top: 10px; color: var(--accent-gold); }

/* --- GRID DE FOTOS --- */
.grid {
    display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;
    gap: 15px; padding: 20px; width: 100%; height: 100%;
}

/* --- CORRECCIÓN TÉCNICA: FOTOS TIPO POLAROID --- */
.polaroid {
    position: relative; width: 100%; height: 100%;
    background: #fff; 
    padding: 6px 6px 28px 6px; /* Espacio blanco inferior */
    box-shadow: 2px 3px 10px rgba(0,0,0,0.1);
    transform: rotate(var(--r)); transition: transform 0.2s; cursor: pointer;
    border-radius: 4px; /* Bordes suaves */
    /* ¡IMPORTANTE! Esto evita que la imagen se salga del marco blanco */
    overflow: hidden; 
}
.polaroid:active { transform: scale(0.96); }
/* Quitamos filtros para colores vivos */
.polaroid img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 2px; }
.polaroid p { display: none; }

/* --- BOTÓN INFO --- */
.info-btn {
    width: 36px; height: 36px;
    background-color: var(--cover-ruby); /* Rojo por defecto */
    color: var(--text-pop);
    border: 2px solid var(--accent-gold);
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

/* LA ÚNICA REGLA PARA EL COLOR AMARILLO */
.info-btn.active {
    background-color: var(--accent-gold) !important;
    color: var(--cover-ruby) !important;
    transform: scale(1.1);
}

/* EL TOOLTIP */
.info-tooltip {
    position: absolute; bottom: 50px; right: 0;
    background: #fff; padding: 15px; border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1); width: 200px;
    opacity: 0; pointer-events: none;
    transition: all 0.3s ease;
}

.info-tooltip.active {
    opacity: 1; pointer-events: auto;
}

/* --- ZOOM OVERLAY --- */
.overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255, 245, 245, 0.9); /* Fondo claro en el zoom */
    backdrop-filter: blur(10px); z-index: 1000;
    display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none; transition: opacity 0.4s ease;
}
.overlay.active { opacity: 1; pointer-events: auto; }

.big-card {
    width: 300px; height: 420px;
    position: relative; transform-style: preserve-3d; transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: pointer;
    box-shadow: 0 25px 60px rgba(0,0,0,0.2);
    border-radius: 8px;
}
.big-face {
    position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
    background: #fff; padding: 15px 15px 60px 15px; border-radius: 8px;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden;
}
.big-front img { width: 100%; height: 100%; object-fit: cover; border-radius: 4px; }
.big-back { 
    transform: rotateY(180deg); background: var(--paper-clean); padding: 30px; 
    font-family: 'Dancing Script', cursive; font-size: 1.8rem; color: var(--cover-ruby);
    text-align: center; border: 4px solid var(--cover-ruby);
}
.big-card.flipped { transform: rotateY(180deg); }

/* --- RESPONSIVE --- */
@media (max-width: 650px) {
    .scene { transform: scale(0.60); }
    h1 { font-size: 1.6rem; margin-top: 5px; }
    .book { height: 420px; }
    .grid { gap: 10px; padding: 15px; }
    .polaroid { padding-bottom: 22px; }
/* --- BOTÓN INFO (CORREGIDO) --- */
.info-wrapper {
    position: fixed; bottom: 25px; right: 25px; z-index: 100;
    display: flex; flex-direction: column; align-items: flex-end;
}

.info-btn {
    /* --- CAMBIO 1: TAMAÑO MÁS PEQUEÑO --- */
    width: 36px; height: 36px;          /* Antes era 44px */
    font-size: 1rem;                    /* Letra más pequeña */
    
    background: var(--cover-ruby); border: 2px solid var(--accent-gold);
    border-radius: 50%; color: var(--text-pop); 
    font-family: 'Quicksand', sans-serif; font-weight: bold; 
    cursor: pointer; transition: all 0.3s ease; 
    box-shadow: 0 4px 15px rgba(194, 24, 91, 0.4);
    /* Quitamos el outline feo que ponen los navegadores al hacer clic */
    outline: none; 
}

/* --- CAMBIO 2: SOLO HOVER, NO FOCUS --- */
/* Quitamos el :focus para que el estilo no se quede pegado tras el clic */
.info-btn:hover {
    transform: scale(1.1) rotate(10deg); 
    background: var(--accent-gold); 
    color: var(--cover-ruby);
}
/* Efecto de pulsación momentáneo */
.info-btn:active {
    transform: scale(0.95);
}

.info-tooltip {
    position: absolute; bottom: 50px; right: 0; background: #fff; padding: 15px; border-radius: 12px; 
    box-shadow: 0 5px 20px rgba(0,0,0,0.1); width: 200px; text-align: right;
    opacity: 0; pointer-events: none; transform: translateY(10px); transition: all 0.3s ease; color: var(--text-dark);
}

/* El JS se encarga de poner y quitar esta clase 'active' */
.info-tooltip.active {
    opacity: 1; pointer-events: auto; transform: translateY(0);
}
.info-tooltip p { margin: 8px 0; font-size: 0.85rem; line-height: 1.4; font-weight: 500; }}

@media (max-width: 360px) {
    .scene { transform: scale(0.52); }
}

/* --- ESTILO DEL MENSAJE SECRETO --- */
.dedication-container {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 40px;
    text-align: center;
    color: var(--text-dark);
}

.message-body {
    font-family: 'Quicksand', sans-serif;
    font-size: 1rem;
    line-height: 1.8;
    font-weight: 500;
    margin: 20px 0;
    color: #555;
}

.message-sign {
    font-family: 'Dancing Script', cursive; /* Letra manuscrita romántica */
    font-size: 1.8rem;
    color: var(--cover-ruby); /* Mismo rojo que la portada */
    margin-top: 10px;
}

.corner-ornament {
    font-size: 1.5rem;
    color: var(--accent-gold);
    opacity: 0.8;
}

.flipped-ornament {
    transform: rotate(180deg);
}

/* --- ARREGLO CONTRAPORTADA --- */

/* Estilo para el título "Te Amo mi hadita" */
.cover-design h3 {
    font-family: 'Cinzel', serif;
    font-size: 2.2rem;      /* Un poco más pequeño que la portada para que quepa */
    line-height: 1.2;
    text-align: center;     /* IMPORTANTE: Centra el texto si ocupa dos líneas */
    color: var(--text-pop);
    font-weight: 700;
    margin: 0 0 15px 0;     /* Un poco de espacio debajo */
    max-width: 90%;         /* Evita que toque los bordes laterales */
    z-index: 2;             /* Asegura que esté sobre el borde dorado */
}

/* Estilo mejorado para el mensaje final */
.final-msg {
    font-family: 'Dancing Script', cursive;
    font-size: 1.6rem;      /* Tamaño ajustado */
    color: var(--accent-gold);
    text-align: center;     /* IMPORTANTE: Centrado */
    line-height: 1.4;       /* Mejor espaciado entre líneas */
    max-width: 85%;         /* Margen de seguridad lateral */
    margin: 0;              /* Quitamos márgenes extraños */
    z-index: 2;
}

/* --- ESTILO DE LA FECHA EN EL ZOOM --- */
/* --- ESTILO DE LA FECHA EN EL ZOOM (VERSIÓN ABAJO) --- */
.zoom-date {
    position: absolute;
    bottom: 0;             /* La anclamos al final de la tarjeta */
    left: 0;
    width: 100%;
    height: 15%;           /* Le damos el 15% del espacio inferior */
    display: flex;         /* Usamos flex para centrar el texto perfecto */
    justify-content: center;
    align-items: center;
    
    font-family: 'Dancing Script', cursive; /* Queda más bonito tipo firma */
    font-weight: 700;
    font-size: 1.4rem;     /* Un poco más grande */
    color: var(--text-dark); /* Color oscuro para que se lea bien sobre blanco */
    z-index: 10;
}

/* --- AJUSTE DE LA FOTO GIGANTE --- */
.big-front img {
    margin-top: 0;         /* Quitamos el margen de arriba */
    width: 100%;
    height: 85% !important; /* La foto ocupa el 85%, dejando el 15% abajo para la fecha */
    object-fit: cover;
    border-radius: 4px 4px 0 0; /* Redondeamos solo las esquinas de arriba */
    display: block;
}