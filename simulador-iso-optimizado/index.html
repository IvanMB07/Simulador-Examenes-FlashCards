<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Simulador de Examen</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="contenedor">
        <div id="seleccionModo">
            <div class="resultados">
                <div class="titulo-resultados">Elige modo</div>
                <div class="mensaje-resultado">
                    <strong>Pr√°ctica</strong>: 50 preguntas de los temas seleccionados, feedback instant√°neo y puedes volver atr√°s.<br>
                    <strong>Examen</strong>: 50 preguntas (10 por cada uno de los 5 temas), 50 minutos, sin volver atr√°s.<br>
                    <strong>Test de Fallos</strong>: Repasa √∫nicamente las preguntas que has fallado anteriormente.
                </div>
                
                <div class="config-section">
                    <div class="config-title">üìö Seleccionar Temas (solo Modo Pr√°ctica)</div>
                    <div class="config-description" style="margin-bottom: 10px; color: #888;">
                        50 preguntas distribuidas proporcionalmente entre los temas seleccionados
                    </div>
                    <div id="infoDistribucion" style="margin-bottom: 15px; padding: 10px; background: #1a1a1a; border-radius: 6px; font-size: 13px; color: #00d4ff;"></div>
                    <div style="display: grid; grid-template-columns: repeat(3, minmax(140px, auto)); gap: 10px; justify-content: center;">
                        <label class="tema-checkbox">
                            <input type="checkbox" value="1" checked onchange="app.toggleTema(1)">
                            <span>Tema 1 (L1, L11, L12)</span>
                        </label>
                        <label class="tema-checkbox">
                            <input type="checkbox" value="2" checked onchange="app.toggleTema(2)">
                            <span>Tema 2 (L21)</span>
                        </label>
                        <label class="tema-checkbox">
                            <input type="checkbox" value="3" checked onchange="app.toggleTema(3)">
                            <span>Tema 3 (L31)</span>
                        </label>
                        <label class="tema-checkbox">
                            <input type="checkbox" value="4" checked onchange="app.toggleTema(4)">
                            <span>Tema 4 (L41)</span>
                        </label>
                        <label class="tema-checkbox">
                            <input type="checkbox" value="5" checked onchange="app.toggleTema(5)">
                            <span>Tema 5 (L51)</span>
                        </label>
                    </div>
                    <div class="config-option" style="margin-top: 15px;">
                        <div>
                            <div class="config-label">Ordenar por temas</div>
                            <div class="config-description">Las preguntas se agrupan por tema secuencialmente</div>
                        </div>
                        <div class="toggle-switch" id="toggleOrdenTema" onclick="app.toggleConfig('ordenarPorTema')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>

                <div class="config-section">
                    <div class="stat" id="statFallos">
                        <div class="stat-label">Preguntas falladas guardadas</div>
                        <div class="stat-valor" id="contadorFallos">0</div>
                    </div>
                    <button class="btn-anterior" id="btnLimpiarFallos" onclick="app.limpiarFallos()" style="width: 100%; margin-top: 10px;">
                        üóëÔ∏è Limpiar preguntas falladas
                    </button>
                </div>
                
                <div class="botones">
                    <button class="btn-reiniciar" onclick="app.iniciarModo('practica')">Modo pr√°ctica</button>
                    <button class="btn-terminar" onclick="app.iniciarModo('examen')">Modo examen</button>
                    <button class="btn-test-fallos" id="btnTestFallos" onclick="app.iniciarModo('fallos')" disabled>Test de Fallos <span class="badge-fallos" id="badgeFallos">0</span></button>
                </div>
            </div>
        </div>

        <div id="examen" class="oculto">
            <div class="encabezado">
                <h1>Simulador de Examen ISO</h1>
                <div class="timer">
                    <span id="tiempoRestante" class="contador">--:--</span>
                    <span id="modoActual" class="contador"></span>
                </div>
                <div id="totalPreguntasInfo" style="font-size: 12px; color: #00d4ff;"></div>
                <div class="progreso">
                    <div class="progreso-barra" id="barraProgreso"></div>
                </div>
            </div>

            <div class="pregunta-contenedor">
                <div class="pregunta-numero" id="preguntaNumero"></div>
                <div class="pregunta-texto" id="preguntaTexto"></div>
                <div class="opciones" id="opcionesContenedor"></div>
            </div>

            <div class="atajos-teclado">
                ‚å®Ô∏è <strong>Atajos:</strong> 
                <span class="tecla">‚Üê</span> <span class="tecla">‚Üí</span> Navegar | 
                <span class="tecla">1-4</span> Seleccionar | 
                <span class="tecla">Enter</span> Terminar
            </div>

            <div class="botones">
                <button class="btn-anterior" id="btnAnterior" onclick="app.anterior()">‚Üê Anterior</button>
                <button class="btn-siguiente" id="btnSiguiente" onclick="app.siguiente()">Siguiente ‚Üí</button>
                <button class="btn-terminar" onclick="app.terminar()">Terminar Examen</button>
            </div>
        </div>

        <div id="resultados" class="oculto">
            <div class="resultados">
                <div class="titulo-resultados">Examen Completado</div>
                <div class="mensaje-resultado">Tu puntuaci√≥n final es:</div>
                <div class="puntuacion" id="puntuacionFinal">0/10</div>
                
                <div class="estadisticas">
                    <div class="stat">
                        <div class="stat-label">Correctas</div>
                        <div class="stat-valor" id="respuestasCorrectas">0</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Incorrectas</div>
                        <div class="stat-valor" id="respuestasIncorrectas">0</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Sin responder</div>
                        <div class="stat-valor" id="sinResponder">0</div>
                    </div>
                </div>

                <div id="erroresDetalle" class="errores-detalle oculto"></div>

                <button class="btn-reiniciar" onclick="app.reiniciar()">Reiniciar Examen</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
